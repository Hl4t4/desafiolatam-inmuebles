{
    "schemaVersion": 1,
    "dockerfileLines": [
        "FROM python:3.12.4-alpine3.20",
        "WORKDIR /usr/inmuebles",
        "RUN adduser hlata",
        "RUN adduser hlata sudo",
        "RUN grep sudo /etc/group",
        "COPY ./requirements.txt ./",
        "COPY ./inmuebles/ ./",
        "RUN apk update && apk upgrade && apk add --no-cache make g++ openssh libpq-dev postgresql-dev postgresql postgresql-contrib curl",
        "RUN pip install -r requirements.txt",
        "RUN python manage.py migrate",
        "RUN python manage.py loaddata web/fixtures/regiones.json",
        "RUN python manage.py loaddata web/fixtures/comunas.json",
        "RUN python manage.py loaddata web/fixtures/tipos_usuarios.json",
        "RUN python manage.py loaddata web/fixtures/tipos_inmuebles.json",
        "RUN python manage.py loaddata web/fixtures/usuarios.json",
        "RUN python manage.py loaddata web/fixtures/inmuebles.json ",
        "RUN python manage.py loaddata web/fixtures/solicitudes_arriendo.json",
        "RUN python manage.py collectstatic",
        "EXPOSE 80",
        "USER hlata",
        "CMD [ "gunicorn", "--bind", "0.0.0.0:80", "inmuebles.wsgi:application"]"
  ]
}
